CREATE TABLE DISTRITO (
    COD_DIS CHAR(5) PRIMARY KEY,
    NOM_DIS VARCHAR(50) NOT NULL
);

CREATE TABLE CLIENTE (
    COD_CLI CHAR(5) PRIMARY KEY,
    RSO_CLI CHAR(30) NOT NULL,
    DIR_CLI VARCHAR(100),
    TLF_CLI CHAR(9),
    RUC_CLI CHAR(11),
    COD_DIS CHAR(5),
    FEC_REG DATE,
    TIP_CLI VARCHAR(10),
    CON_CLI VARCHAR(30),
    FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE VENDEDOR (
    COD_VEN CHAR(3) PRIMARY KEY,
    NOM_VEN VARCHAR(20) NOT NULL,
    APE_VEN VARCHAR(20) NOT NULL,
    SUE_VEN DECIMAL(10,2),
    FIN_VEN DATE,
    TIP_VEN VARCHAR(10),
    COD_DIS CHAR(5),
    FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE PROVEEDOR (
    COD_PRV CHAR(5) PRIMARY KEY,
    RSO_PRV VARCHAR(80) NOT NULL,
    DIR_PRV VARCHAR(100),
    TEL_PRV CHAR(15),
    COD_DIS CHAR(5),
    REP_PRO VARCHAR(80),
    FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE PRODUCTO (
    COD_PRO CHAR(5) PRIMARY KEY,
    DES_PRO VARCHAR(50) NOT NULL,
    PRE_PRO DECIMAL(10,2),
    SAC_PRO INT,
    SMI_PRO INT,
    UNI_PRO VARCHAR(30),
    LIN_PRO VARCHAR(30),
    IMP_PRO VARCHAR(10)
);

CREATE TABLE FACTURA (
    NUM_FAC VARCHAR(12) PRIMARY KEY,
    FEC_FAC DATE NOT NULL,
    COD_CLI CHAR(5),
    FEC_CAN DATE NOT NULL,
    EST_FAC VARCHAR(10),
    COD_VEN CHAR(3),
    POR_IGV DECIMAL(5,2),
    FOREIGN KEY (COD_CLI) REFERENCES CLIENTE(COD_CLI) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (COD_VEN) REFERENCES VENDEDOR(COD_VEN) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE DETALLE_FACTURA (
    NUM_FAC VARCHAR(12),
    COD_PRO CHAR(5),
    CAN_VEN INT,
    PRE_VEN DECIMAL(10,2),
    PRIMARY KEY (NUM_FAC, COD_PRO),
    FOREIGN KEY (NUM_FAC) REFERENCES FACTURA(NUM_FAC) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (COD_PRO) REFERENCES PRODUCTO(COD_PRO) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE ORDEN_COMPRA (
    NUM_OCO CHAR(5) PRIMARY KEY,
    FEC_OCO DATE NOT NULL,
    COD_PRV CHAR(5),
    FAT_OCO DATE,
    EST_OCO CHAR(1),
    FOREIGN KEY (COD_PRV) REFERENCES PROVEEDOR(COD_PRV) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE DETALLE_COMPRA (
    NUM_OCO CHAR(5),
    COD_PRO CHAR(5),
    CAN_DET INT,
    PRIMARY KEY (NUM_OCO, COD_PRO),
    FOREIGN KEY (NUM_OCO) REFERENCES ORDEN_COMPRA(NUM_OCO) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (COD_PRO) REFERENCES PRODUCTO(COD_PRO) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE ABASTECIMIENTO (
    COD_PRV CHAR(5),
    COD_PRO CHAR(5),
    PRE_ABA DECIMAL(10,2),
    PRIMARY KEY (COD_PRV, COD_PRO),
    FOREIGN KEY (COD_PRV) REFERENCES PROVEEDOR(COD_PRV) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (COD_PRO) REFERENCES PRODUCTO(COD_PRO) ON DELETE CASCADE ON UPDATE CASCADE
);

